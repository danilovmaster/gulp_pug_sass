# Сборка gulp, pug, sass
## С использованием модулей EC6

Моя собственная сборка, сделана не на common модулях, а на модулях EcmaScript 6.  
Сделано так,  в силу того, 
что многие зависимости, как раз используют именно поддержку этих модулей.  
То есть - модули именно импортируются с помощью import,  
а не используется require.  
Соответсенно все таски, которые находятся в /tasks/,  
а также "главный" gulpfile.mjs имеют расширение .mjs, а не js 

Установка стандартно:  
*npm install*

Запускается все с помощью команды  
*gulp watcher*  
После этого все изменения в pug файлах, в файлах scss, в файлах картинок регистрируются и:
1. Файлы pug трансформируются в html и объединяются в единый index.html, который размещается в /public/.  
Объединение (порядок последовательности) происходит  
согласно инструкциям include в /src/index.pug и в файлах .pug в компонентах в /src/components/
2. Файлы scss трансформируются в css, минифицируются  и объединяются в единый style.min.css, который также размещается в /public/
3. Файлы картинок: 
    *  Все, кроме svg (jpg, jpeg, png etc) - надо размещать в /src/images/ далее они немного сжимаются (практически без потери качества - натсройки можно менять), 
	 конвертируются в webp,  далее копируются в /public/images/,  
	соответственно в файлах в scss в директивах url надо указывать /public/images/ и т.д.  
	Но есть нюанс! Зависит от используемого редактора/ IDE - в случае использования, например, pycharm professional - пути будут несколько иные  
	точно не вспомню, но на локалке вроде надо от корня проекта плясать.
    * svg - копируются в /public/images/svg, также есть спрайт в /public/images/svg/stack/sprite.svg - но мне не очень понравилось использовать его  
	возможно требуются какие-то донастройки
    * js -пока так, единый файл (помимо сторонних библиотек) размещается в /src/index.js он минифицируется и копируется в /public/index.min.js

При размещении где-то в продакшен все пути с /public/images/, /public/fonts (или иными в зависимости от IDE см. выше)  и т.д. должны быть заменены на пути без /public/,  
то есть перед копированием на продакшн результирующих index.html, index.min.css -необходимо чуть-чуть ручной работы.

Если нужен не минифицированный css - надо запускать 
* gulp watcher_expand *
Тогда в /public/ сначала появится и будет при изменениях стилей обновляться файл style.expanded.css,  
 соответственно он и должен  прописан в index.pug.  
Он будет не минифицирован, но если нужно так, чтобы, например, все медиа-запросы были в одном месте -  
необходимо настроить таски в /tasks/style_expanded.mjs.
Все необходимые модули для этого есть, ну или их можно легко установить.



